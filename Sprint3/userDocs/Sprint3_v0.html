<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="it">
  <head>
    <!-- <script type="text/javascript" src="../css/issStyle.js"></script> -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/css/foundation.min.css"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/foundation-sites@6.7.4/dist/js/foundation.min.js"
      crossorigin="anonymous"
    ></script>
    <!-- <link rel="stylesheet" type="text/css" href="../../resources/_styles/style.css" /> -->
    <link rel="stylesheet" type="text/css" href="./css/style.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>

    <title>ISS25 - Sprint 3</title>
  </head>

  <body>
    <div id="top">
      <h1>LABORATORIO DI INGEGNERIA DEI SISTEMI SOFTWARE - Sprint 3</h1>
    </div>
    <div class="body">
      <h2>Introduction</h2>
      <div class="remark">
        <div class="textbody grid-x grid-margin-x align-middle">
          <div class="medium-8">
            Nello Sprint precedente sono state analizzate le problematiche ed è
            stato progettato il contesto operativo del componente Sensor
            L'output finale è stato una modellazione di alto livello del sistema
            e una prima implementazione funzionante (figura a destra).
            <br />
            <br />
            L'obiettivo dello Sprint 3 è di analizzare le problematiche relative
            allo sviluppo di un'interfaccia grafica per l'utente finale (GUI) e
            realizzarne un'implementazione funzionante, integrandola con i
            componenti del sistema già modellati neglle fasi precedenti.
          </div>
          <div class="medium-4">
            <img
              src="../../Sprint2/sprint2_sensors_modelarch.png"
              alt="Sprint 2 System Overview"
              width="100%"
            />
          </div>
        </div>
      </div>

      <h2>Requirements</h2>
      <div class="remark">
        Il sistema deve soddisfare il seguente requisito:
        <ul>
          <li>
            Deve fornire un'interfaccia grafica web dinamica che consenta agli
            utenti di visualizzare in tempo reale lo stato della hold.
          </li>
        </ul>
      </div>

      <h2>Problem analysis</h2>
      <div class="remark">
        <!-- Per soddisfare il requisito sopra elencato, è necessario affrontare le seguenti problematiche: -->

        <div class="textparagraph">
          <h3>Come modellare GUI?</h3>
          <div class="textbody">
            Da requisiti la GUI deve essere accessibile via web, pertanto occorre implementarla come applicazione web-based. Questo consente di rendere la GUI accessibile
            da qualsiasi dispositivo dotato di un browser web, senza la necessità di installare software aggiuntivo.
            <br></br>
            A questo scopo si suggerisce di utilizzare un framework di sviluppo come SpringBoot, 
            il quale permette di sviluppare applicazioni web in Java
            in grado di interfacciarsi agevolmente con i sistemi precedentemente implementati.
            Si suggerisce pertanto di modellare la GUI non come attore a stati finiti ma come un'entità separata in grado di comunicare con cargoservice.
          </div>
        </div>
        <div class="textparagraph">
          <h3>Come estrarre le informazioni sullo stato della hold?</h3>
          <div class="textbody">
            L'attore <strong>holdmanager</strong>, in esecuzione nel contesto <i>ctx_cargo</i>, contesto del corebusiness del sistema
            aggiorna costantemente lo stato della hold in seguito al caricamento prodotti.
            Per consentire alla GUI di visualizzare lo stato della hold, si possono esaminare molteplici modalità alternative, come ad esempio:
            <ul>
              <li>Implementare un'interfaccia RESTful nell'attore <strong>holdmanager</strong> per consentire alla GUI di effettuare richieste HTTP e ottenere lo stato della hold in formato JSON.</li>
              <li>Utilizzare un sistema di messaggistica (ad esempio MQTT o WebSocket) per inviare aggiornamenti in tempo reale dalla holdmanager alla GUI ogni volta che lo stato della hold cambia.</li>
              <li>Implementare un meccanismo di polling nella GUI che richieda periodicamente lo stato della hold all'attore holdmanager.</li>
              <li>Prevedere l' aggiornamento di una risorsa CoAP da parte di <strong>holdmanager</strong> e recuperarne lo stato ad ogni cambiamento.</li>
            </ul>
            Si suggerisce di adottare l'ultima soluzione, in quanto coerente con le tecnologie già adottate nel sistema e con i paradigmi di comunicazione utilizzati,
            inoltre in fase di progettazione dell'attore qak <strong>holdmanager</strong> è già stato previsto l'aggiornamento di una risorsa CoAP, che contiene la
            descrizione dello stato della hold in formato JSON.
          </div>
        </div>
        <div class="textparagraph">
          <h3>Come visualizzare lo stato della hold in una GUI?</h3>
          <div class="textbody">
            Le informazioni import riguardanti la hold che devono essere visualizzate sono:
            <ul>
              <li> Che slot sono occupati e le informazioni riguardanti i prodotti che contengono (PID, Nome, Peso)</li>
              <li> Peso totale della hold e peso massimo che può assumere</li>
            </ul>
            Queste informazioni devono essere rappresentate in modo chiaro e possono essere interamente estrapolate dalla stringa JSON fornita dall'attore <strong>holdmanager</strong>
            <br/><br/>
            Per realizzare la GUI ed implementare le logiche necessarie all'estrazione dello stato della hold dal core business, si suggerisce di realizzare un progetto SpringBoot 
            Per estrarre le informazioni dall'attore <strong>holdobserver</strong> si consiglia di realizzare un progetto 
          </div>
          </div>
      </div>

      <h2>Logical Architecture</h2>
      <div class="medium-12 text-center remark">
        <img
          src="./resources/sprint3_logicalArch.png"
          class="text-center"
          alt="map"
          width="75%"
        />
      </div>

      <h2>Test plans</h2>

      <h2>Project</h2>
      <div class="remark">
          Per lo sviluppo del progetto della web gui è stato scelto di adottare
          il framework SpringBoot, un framework Java per lo sviluppo di applicazioni web
          che dunque si integra bene con le tecnologie utilizzate nel sistema e le librerie
          fornite dal committente.
          <br>
          Le classi principali del progetto sono:
          <ul>
            <li>CoapToWS: Client CoAP e gestione degli aggiornamenti.</li>
            <li>WSHandler: Gestione WebSocket.</li>
            <li>HoldStateService: Accesso TCP e interrogazione su richiesta dello stato.</li>
          <div class="textparagraph">
            <h3>comportamento CoapToWS</h3>
            <div class="textbody">
              La classe CoapToWS implementa un osservatore CoAP che si iscrive alla risorsa <i>holdstate</i>
              esposta dall'attore <strong>holdmanager</strong>. Ogni volta che la risorsa viene aggiornata
              l'osservatore riceve l'aggiornamento, estrae il payload della risposta e grazie ad una classe 
              ausiliaria <strong>HoldResponseParser</strong> estrae le informazioni rilevanti dallo stato della hold quali 
              pid, nome e peso dei prodotti caricati.
              (lo stato della hold in formato JSON) e inoltrandolo a tutti i client WebSocket
              connessi tramite la classe WSHandler.
          </div>
          </div>

      </div>
      
      <h2>System Design</h2>

      <div class="medium-12 text-center remark">
        <img
          src="../sprint2_sensors_modelarch.png"
          class="text-center"
          alt="map"
          width="75%"
        />
      </div>

      <h2>Considerazioni finali e Deployment</h2>

      <footer class="footer">
        <div class="grid-container fluid">
          <div class="grid-x grid-margin-x align-middle">
            <div class="small-12 medium-3 text-center">
              <a
                class="button change"
                href="../../Sprint2/userDocs/sprint2_v0.html"
              >
                &larr; Previous Sprint
              </a>
            </div>

            <div class="small-12 medium-4 text-center">
              Fasano Andrea : andrea.fasano3@studio.unibo.it <br />
              <!-- 0001189592 -->
              Florian Alberto : alberto.florian@studio.unibo.it <br />
              <!-- 0001189572 -->
              Sampaoli Giacomo : giacomo.sampaoli@studio.unibo.it
              <!-- 0001176431 -->
            </div>

            <div class="small-12 medium-2 align-middle text-center">
              <a
                href="https://github.com/FlorAber/ISS25-cargoservice"
                class="button primary"
                target="_blank"
              >
                GitHub Repository
              </a>
            </div>

            <div class="small-12 medium-3 text-right">
              <a class="button change disabled"> Next Sprint &rarr; </a>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>
